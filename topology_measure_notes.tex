% Document setup
\documentclass[article, a4paper, 11pt, oneside]{memoir}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[UKenglish]{babel}

% Document info
\newcommand\doctitle{Notes on measure theory and topology}
\newcommand\docauthor{Danny Nyg√•rd Hansen}

% Formatting and layout
\usepackage[autostyle]{csquotes}
\usepackage[final]{microtype}
\usepackage{xcolor}
\frenchspacing
\usepackage{styles/articlepagestyle}
\usepackage{styles/articlesectionstyle}

% Fonts
\usepackage[largesmallcaps]{kpfonts}
\DeclareSymbolFontAlphabet{\mathrm}{operators} % https://tex.stackexchange.com/questions/40874/kpfonts-siunitx-and-math-alphabets
\linespread{1.06}
\let\mathfrak\undefined
\usepackage{eufrak}
\usepackage{inconsolata}
\usepackage{amssymb}

% Hyperlinks
\usepackage{hyperref}
\definecolor{linkcolor}{HTML}{4f4fa3}
\hypersetup{%
	pdftitle=\doctitle,
	pdfauthor=\docauthor,
	colorlinks,
	linkcolor=linkcolor,
	citecolor=linkcolor,
	urlcolor=linkcolor,
	bookmarksnumbered=true
}

% Equation numbering
\numberwithin{equation}{chapter}

% Footnotes
\footmarkstyle{\textsuperscript{#1}\hspace{0.25em}}

% Mathematics
\usepackage{styles/basicmathcommands}
\usepackage{styles/framedtheorems}
\usepackage{styles/topologycommands}
\usepackage{tikz-cd}
\usetikzlibrary{babel}

% Lists
\usepackage{enumitem}
\setenumerate[0]{label=\normalfont(\arabic*)}

% Bibliography
\usepackage[backend=biber, style=authoryear, maxcitenames=2, useprefix]{biblatex}
\addbibresource{references.bib}

% Title
\title{\doctitle}
\author{\docauthor}

\newcommand{\setF}{\mathbb{F}}
\newcommand{\ev}{\mathrm{ev}}
\newcommand{\calT}{\mathcal{T}}
\newcommand{\calU}{\mathcal{U}}
\newcommand{\calB}{\mathcal{B}}
\newcommand{\calE}{\mathcal{E}}
\newcommand{\calC}{\mathcal{C}}
\newcommand{\calD}{\mathcal{D}}
\newcommand{\calF}{\mathcal{F}}
\newcommand{\calG}{\mathcal{G}}
\newcommand{\calM}{\mathcal{M}}
\newcommand{\calA}{\mathcal{A}}
\newcommand{\borel}{\mathcal{B}}
\newcommand{\measurable}{\mathcal{M}}
\newcommand{\wto}{\Rightarrow}
\DeclarePairedDelimiter{\net}{\langle}{\rangle}
\newcommand{\strucS}{\mathfrak{S}}
\DeclarePairedDelimiter{\gen}{\langle}{\rangle} % Generating set
\newcommand{\powerset}[1]{2^{#1}}
\newcommand{\frakL}{\mathfrak{L}}

% Categories
\newcommand{\cat}[1]{\mathcal{#1}}
\newcommand{\scat}[1]{\mathbf{#1}} % category supposed to be small
\newcommand{\ncat}[1]{\mathbf{#1}} % named categories like Set, Top

\newcommand{\catSet}{\ncat{Set}} % Category of sets
\newcommand{\catGrp}{\ncat{Grp}} % Category of groups
\newcommand{\catTop}{\ncat{Top}} % Category of topological spaces
\newcommand{\catMble}{\ncat{Mble}} % Category of measurable spaces
\newcommand{\catPos}{\ncat{Pos}} % Category of posets
\newcommand{\catCLat}{\ncat{CLat}} % Category of complete lattices
\newcommand{\catCJoinLat}{\ncat{CsLat}^{\join}} % Category of complete join-semilattices
\newcommand{\catCMeetLat}{\ncat{CsLat}^{\meet}} % Category of complete meet-semilattices
\newcommand{\catStruc}[1]{\ncat{Str}_{#1}} % Category of structured sets
\newcommand{\catStrucS}{\catStruc{\strucS}} % Category of \strucS-structured sets


% Section style -- add to section style .sty?
\setsubsecheadstyle{\normalfont\itshape}


% Preimage -- to be added to mathcommands .sty
\newcommand{\preim}{^{-1}}


\begin{document}

\maketitle

\chapter{Introduction}

These notes are meant to serve two purposes: Firstly to give an account of (some of) the similarities between topological spaces and measurable spaces. Any student of topology and measure theory have noticed that while $\sigma$-algebras generally do not behave as nicely as topologies, we are able to perform many of the same constructions on both structures: Structure-preserving maps (countinuous and measurable maps, respectively) are defined the same way, maps induce topologies and $\sigma$-algebras in the same way, there are subspaces, products, quotients, and so on.

If we fix a set $X$, both the set of topologies and the set of $\sigma$-algebras on $X$ are complete lattices when ordered by inclusion. I am not aware that such a lattice of structures on a set has a commonly used name, so I have simply called them \emph{structures} in these notes.

Secondly we wish to explore how a topological and measure-theoretical structure on a single set interact.


\section{Notation}

We generally use notation that is standard in topology, measure theory and category theory. The following may or may not be familiar to the reader:

Given a set $X$ we denote its power set by $\powerset{X}$. If $f \colon X \to Y$ is a set function and $\calF \subseteq \powerset{Y}$, we write
%
\begin{equation*}
    f\preim(\calF)
        = \set{f\preim(B)}{B \in \calF}.
\end{equation*}
%
For a set $X$ and a family $\calD \subseteq \powerset{X}$ of subsets, we write $\sigma(\calD)$ for the $\sigma$-algebra on $X$ generated by $\calD$, i.e. the smallest $\sigma$-algebra containing $\calD$. We do not use any special notation for a topology generated by a family of sets.

If $X$ is a topological space, we denote the Borel $\sigma$-algebra on $X$ by $\borel(X)$.



\chapter{Structured sets}


\section{Definitions and basic properties}

Let $\strucS$ be a map from sets to sets such that $\strucS_X \defn \strucS(X)$ is a collection of subsets of $\powerset{X}$, and such that for all sets $X$ and $Y$ and maps $f \colon X \to Y$,
%
\begin{enumerate}
    \item $\strucS_X$ is partially ordered by set inclusion,
    
    \item $\strucS_X$ is a complete lattice with minimum $\{\emptyset, X\}$ and maximum $2^X$,
    
    \item\label{enum:structure_def_pullback} if $\calF \in \strucS_Y$, then $f\preim(\calF) \in \strucS_X$, and
    
    \item\label{enum:structure_def_pushforward} if $\calE \in \strucS_X$, then
    %
    \begin{equation*}
        \set{B \subseteq Y}{f\preim(B) \in \calE} \in \strucS_Y.
    \end{equation*}
\end{enumerate}
%
We will call such a map $\strucS$ a \emph{structure functor}, and it is indeed a functor as we will see in \cref{sec:structure_categorical}.

If $X$ is a set, then a $\calE \in \strucS_X$ is called a \emph{$\strucS$-structure} on $X$, and we will call the pair $(X, \calE)$ a \emph{$\strucS$-structured set}. We refer to $\strucS_X$ as the \emph{lattice of $\strucS$-structures} on $X$. The minimal structure $\{\emptyset, X\}$ is called the \emph{trivial structure}, and the maximal structure $\powerset{X}$ is called the \emph{discrete structure} on $X$.

Fix a structure functor $\strucS$. If $(X, \calE)$ and $(Y, \calF)$ are structured sets, a \emph{homomorphism} from $X$ to $Y$ is a map $f \colon X \to Y$ such that $f\preim(\calF) \subseteq \calE$. Clearly the composition of two homomorphisms is again a homomorphism, so the collection of structured sets and homomorphisms form a (locally small) category. Let us denote this category by $\catStrucS$.

The structure $f\preim(\calF)$ in \cref{enum:structure_def_pullback} is called the \emph{pullback} of $\calF$ by $f$ and is denoted $f^*(\calF)$. Similarly, the structure $\set{B \subseteq Y}{f\preim(B) \in \calE}$ in \cref{enum:structure_def_pushforward} is called the \emph{pushforward} of $\calE$ by $f$ and is denoted $f_*(\calE)$. The pullback and pushforward by $f$ is defined for all set functions $f$, not just homomorphisms.

\begin{example}
    Let $\strucS$ denote the map that associates to a set its lattice of topologies. The first two conditions above are obviously satisfied, and the latter two are easily proved. Thus $\catStrucS$ is just the category $\catTop$ of topological spaces. Similarly, if $\strucS$ maps a set to its lattice of $\sigma$-algebras, then $\catStrucS$ is the category $\catMble$ of measurable spaces.
\end{example}

In the sequel we fix a structure functor $\strucS$.

\begin{lemma}
    Let $X$ be a set. If $\calD \subseteq \powerset{X}$, then there is a smallest element $\gen{\calD} \in \strucS_X$ with $\calD \subseteq \gen{\calD}$.
\end{lemma}

\begin{proof}
    Let $\Sigma(\calD) = \set{\calE \in \strucS_X}{\calD \subseteq \calE}$. Since $\strucS_X$ is a complete lattice, we can put
    \begin{equation*}
        \gen{\calD} = \bigmeet_{\calE \in \Sigma(\calD)} \calE \in \strucS_X.
    \end{equation*}
\end{proof}
%
If $\gen{\calD} = \calE$, then we say that $\calD$ \emph{generates} or is a \emph{generating set} for $\calE$. It is easy to see that we may characterise joins as a particular generated structure, namely
%
\begin{equation}
    \label{eq:join_as_generated_structure}
    \bigjoin_{\alpha \in A} \calE_\alpha
        = \gen[\Big]{ \bigunion_{\alpha \in A} \calE_\alpha }.
\end{equation}

\begin{proposition}
    \label{thm:preimage_and_generation_commute}
    Let $(X,\calE)$ and $(Y,\calF)$ be structured sets, and let $f \colon X \to Y$ be any map. For any $\calD \subseteq 2^Y$ we have
    %
    \begin{equation*}
        f\preim\bigl( \gen{\calD} \bigr) = \gen[\big]{f\preim(\calD)}.
    \end{equation*}
    %
    In particular, if $\calF = \gen{\calD}$, then $f$ is a homomorphism if and only if $f\preim(\calD) \subseteq \calE$.
\end{proposition}
%
In topology, this proposition is trivial since every element in $\gen{\calD}$ is a union of finite intersections of elements in $\calD$. The proof below is identical to the one given in measure theory.

\begin{proof}
    First notice that $f\preim(\calD) \subseteq f\preim(\gen{\calD})$, which implies that
    %
    \begin{equation*}
        \gen[\big]{f\preim(\calD)} \subseteq f\preim\bigl( \gen{\calD} \bigr).
    \end{equation*}
    %
    For the second inclusion, notice that
    %
    \begin{equation*}
        \calA = \set[\big]{B \subseteq Y}{f\preim(B) \in \gen[\big]{f\preim(\calD)}}
    \end{equation*}
    %
    is a set structure in $Y$. Since clearly $\calD \subseteq \calA$, we also have $\gen{\calD} \subseteq \calA$, which proves the second inclusion.
\end{proof}


\section{Initial structures}

\begin{definition}[Initial structures]
    Let $(f_\alpha)_{\alpha \in A}$ be a collection of maps from a set $X$ to structured sets $(X_\alpha, \calE_\alpha)$. The \emph{initial structure} $\calE$ on $X$ induced by $(f_\alpha)$ is the smallest structure on $X$ that makes all $f_\alpha$ homomorphisms. That is,
    %
    \begin{equation*}
        \calE
            = \bigjoin_{\alpha \in A} f_\alpha^*(\calE_\alpha)
            = \gen[\Big]{ \bigunion_{\alpha \in A} f_\alpha\preim(\calE_\alpha) }.
    \end{equation*}
\end{definition}

\begin{remark}
    \label{rem:initial_structure_generating_set}
    If $\calD_\alpha$ is a generating set for $\calE_\alpha$ for all $\alpha \in A$, then we may replace $\calE_\alpha$ on the right-hand side above with $\calD_\alpha$. This follows immediately from the second part of \cref{thm:preimage_and_generation_commute}, since the structure $\gen[\big]{ \bigunion_{\alpha \in A} f_\alpha\preim(\calD_\alpha) }$ makes all $f_\alpha$ into homomorphisms.

    Note that $\bigjoin_{\alpha \in A} f_\alpha^*(\calD_\alpha)$ doesn't generally make sense, since $\calD_\alpha$ is not necessarily a structure on $X_\alpha$.
\end{remark}


\begin{theorem}[Characteristic property of initial structures]
    \label{thm:initial_characteristic_property}
    Let $(X,\calE)$ be a structured set equipped with the initial structure induced by maps $f_\alpha \colon X \to X_\alpha$,  $\alpha \in A$. If $(Y,\calF)$ is a structured set, then $f \colon Y \to X$ is a homomorphism if and only if $f_\alpha \circ f$ is a homomorphism for all $\alpha \in A$:
    %
    \begin{equation*}
        \begin{tikzcd}
            X
                \ar[r, "f_\alpha"]
            & X_\alpha \\
            Y
                \ar[u, "f"]
                \ar[ur, "f_\alpha \circ f", swap]
        \end{tikzcd}
    \end{equation*}
    %
    Furthermore, the initial structure on $X$ is unique with this property.
\end{theorem}

\begin{proof}
    If $f$ is a homomorphism, then clearly the $f_\alpha \circ f$ are all homomorphisms.

    Conversely, assume that all compositions $f_\alpha \circ f$ are homomorphisms. It suffices to show that $f\preim(B) \in \calF$ for all $B$ from a generating set for $\calE$, so let $B = f_\alpha\preim(C)$ for some $\alpha \in A$ and $C \in \calE_\alpha$. It follows that
    %
    \begin{equation*}
        f\preim(B)
            = f\preim(f_\alpha\preim(C))
            = (f_\alpha \circ f)\preim(C)
            \in \calF
    \end{equation*}
    %
    as desired.
    
    We now show that the characteristic property uniquely determines a structure on $X$. First notice that the commutative diagram
    %
    \begin{equation*}
        \begin{tikzcd}
            X
                \ar[r, "f_\alpha"]
            & X_\alpha \\
            X
                \ar[u, "\id_X"]
                \ar[ur, "f_\alpha", swap]
        \end{tikzcd}
    \end{equation*}
    %
    shows that $f_\alpha$ is a homomorphism, and that this only depends on $\calE$ having the characteristic property above, and not on the concrete definition of $\calE$.

    Now assume that $\calE'$ is a structure on $X$ with the characteristic property. Consider the commutative diagram
    %
    \begin{equation*}
        \begin{tikzcd}
            (X,\calE')
                \ar[r, "f_\alpha'"]
            & X_\alpha \\
            (X,\calE)
                \ar[u, "\id_X"]
                \ar[ur, "f_\alpha", swap]
        \end{tikzcd}
    \end{equation*}
    %
    where a prime denotes that the domain of a map is $(X,\calE')$ but is as a set function the same as its unprimed counterpart. The $f_\alpha$ are homomorphisms, so by the characteristic property applied to $\calE'$ we get that $\id_X$ is a homomorphism.

    Finally consider the analogous diagram with primes interchanged:
    %
    \begin{equation*}
        \begin{tikzcd}
            (X,\calE)
                \ar[r, "f_\alpha"]
            & X_\alpha \\
            (X,\calE')
                \ar[u, "\id_X'"]
                \ar[ur, "f_\alpha'", swap]
        \end{tikzcd}
    \end{equation*}
    %
    The $f_\alpha'$ are homomorphisms as we showed above, since $\calE'$ by assumption satisfies the characteristic property. Applying the characteristic property to $\calE$ then shows that $\id_X'$ is a homomorphism. Thus $(X,\calE)$ and $(X,\calE')$ are isomorphic through the identity, hence $\calE = \calE'$.
\end{proof}

\begin{examplebreak}[Subsets]
    \label{ex:subset_structure}
    Let $(X,\calE)$ be a structured set, and let $S \subseteq X$. The inclusion map $\iota_S \colon S \to X$ then induces an initial structure on $S$, namely the pullback $\iota_S^*(\calE)$. We denote this subset structure by $\calE_S$, and unless otherwise noted subsets of structured sets always carry this structure. By the characteristic property of initial structures, a map $f \colon Y \to S$ from a structured set is a homomorphism if and only if $\iota_S \circ f$ is a homomorphism.

    On the other hand, if $f \colon Y \to X$ is a map with $f(Y) \subseteq S$, then the map $\tilde f \colon Y \to S$ given by $\tilde f(y) = f(y)$ for all $y \in Y$ is a homomorphism if and only if $f = \iota_S \circ \tilde f$ is a homomorphism. In other words, whether a map is a homomorphism or not does not depend on the codomain if we agree to equip subsets with the structure induced by their inclusion maps.

    If $S = f(Y)$ and $\tilde f \colon Y \to f(Y)$ is an isomorphism, then we call $f$ an \emph{embedding}.
\end{examplebreak}

\begin{examplebreak}[Products]
    \label{ex:product_structure}
    Let $(X_\alpha, \calE_\alpha)_{\alpha \in A}$ be a collection of structured sets, let $X = \bigprod_{\alpha \in A} X_\alpha$ be the Cartesian product of the sets $X_\alpha$, and denote the associated projections by $\pi_\alpha \colon X \to X_\alpha$. We define a product structure
    %
    \begin{equation*}
        \calE = \bigotimes_{\alpha \in A} \calE_\alpha
    \end{equation*}
    %
    as the initial structure on $X$ induced by the projection maps. Since $X$ is a product of the $X_\alpha$ in the category of sets, the characteristic property of initial structures implies that $(X,\calE)$ is a product of the structured sets $(X_\alpha,\calE_\alpha)$.
\end{examplebreak}


\begin{proposition}[Composition of initial structures]
    For $\alpha \in A$ and $\lambda \in \Lambda_\alpha$, let $X_\alpha$ and $Y_{\alpha\lambda}$ be structured sets such that each $X_\alpha$ carry the initial structure induced by maps $g_{\alpha\lambda} \colon X_\alpha \to Y_{\alpha\lambda}$ for $\lambda \in \Lambda_\alpha$. Let $X$ be a set, and consider maps $f_\alpha \colon X \to X_\alpha$.

    Let $\calE_1$ be the initial structure on $X$ induced by the maps $f_\alpha$, and let $\calE_2$ be the structure induced by the compositions $g_{\alpha\lambda} \circ f_\alpha$. Then $\calE_1 = \calE_2$.
    
    % Assume that $X$ has the initial structure induced by a family of maps $f_\alpha \colon X \to X_\alpha$ for $\alpha \in A$, and that each set $X_\alpha$ has the initial structure induced by maps $g_{\alpha\lambda} \colon X_\alpha \to Y_{\alpha\lambda}$ for $\lambda \in \Lambda_\alpha$. Then $X$ carries the initial structure induced by the maps $g_{\alpha\lambda} \circ f_\alpha \colon X \to Y_{\alpha\lambda}$ for $\alpha \in A$ and $\lambda \in \Lambda_\alpha$.
\end{proposition}

% \begin{proof}
%     Let $\calF_{\alpha\lambda}$ be the set structure on $Y_{\alpha\lambda}$. By definition we have
%     %
%     \begin{equation*}
%         \calE_\alpha
%             = \bigjoin_{\lambda \in \Lambda_\alpha} g_{\alpha\lambda}\preim(\calF_{\alpha\lambda})
%             = \gen[\Big]{\bigunion_{\lambda \in \Lambda_\alpha} g_{\alpha\lambda}\preim(\calF_{\alpha\lambda})}.
%     \end{equation*}
%     %
%     Since the union on the right-hand side is a generating set for $\calE_\alpha$, \cref{rem:initial_structure_generating_set} implies that
%     %
%     \begin{equation*}
%         \calE
%             = \gen[\Big]{\bigunion_{\alpha \in A} f_\alpha\preim \Big( \bigunion_{\lambda \in \Lambda_\alpha} g_{\alpha\lambda}\preim(\calF_{\alpha\lambda}) \Big)}
%             = \gen[\Big]{\bigunion_{\alpha \in A} \bigunion_{\lambda \in \Lambda_\alpha} (g_{\alpha\lambda} \circ f_\alpha)\preim(\calF_{\alpha\lambda})},
%     \end{equation*}
%     %
%     proving the claim.
% \end{proof}

\begin{proof}
    By the characteristic property of initial structures, the $f_\alpha$ are homomorphisms if and only if all the $g_{\alpha\lambda} \circ f_\alpha$ are homomorphisms. If $X$ has the structure $\calE_1$, then we must have $\calE_2 \subseteq \calE_1$, since these compositions $g_{\alpha\lambda} \circ f_\alpha$ are homomorphisms. Conversely, if $X$ carries the structure $\calE_2$, then the $f_\alpha$ are homomorphisms, and so $\calE_1 \subseteq \calE_2$.
\end{proof}


\begin{examplebreak}[Subspace and product structures]
    Let $(X_\alpha)_{\alpha \in A}$ be a family of structured sets, and let $S_\alpha \subseteq X_\alpha$ be subsets. Then we may equip the product $S = \bigprod_{\alpha \in A} S_\alpha$ by first equipping $X = \bigprod_{\alpha \in A} X_\alpha$ with the product structure, and then induce the subset structure on $S$. In the opposite order we may first equip each $S_\alpha$ with the subset structure, and then induce the product structure. These in fact give the same structure since the diagram
    %
    \begin{equation*}
        \begin{tikzcd}
            & S_\alpha
                \ar[r, "\iota_{S_\alpha}"]
            & X_\alpha \\
            S  
                \ar[ur, "\pi_{S_\alpha}"]
                \ar[r, "\iota_S", swap]
            & X
                \ar[ur, "\pi_{X_\alpha}", swap]
        \end{tikzcd}
    \end{equation*}
    %
    commutes.
\end{examplebreak}


\begin{examplebreak}[The weak${}^*$-topology]
    Let $X$ be a topological vector space over the field $\setF$ with topological dual $X^*$, and for $x \in X$ let $\ev_x \colon X^* \to \setF$ be the evaluation map $\ev_x(\phi) = \phi(x)$ for $\phi \in X^*$. Since $X^*$ is a subset of $\setF^X$, it naturally carries the subspace topology. The product topology on $\setF^X$ is induced by the projection maps $\pi_x \colon \setF^X \to \setF$ for $x \in X$. But $\pi_x \circ \iota_{X^*}$ is just the evaluation map $\ev_x$, so the subspace topology on $X^*$ is exactly the weak${}^*$-topology.
\end{examplebreak}


\begin{proposition}[Embedding into product]
    Let $f_\alpha \colon Y \to X_\alpha$ for $\alpha \in A$, let $X = \bigprod_{\alpha \in A} X_\alpha$, and let $f \colon Y \to X$ be the unique map such that $f_\alpha = \pi_\alpha \circ f$:
    %
    \begin{equation*}
        \begin{tikzcd}
            && X_\alpha \\
            Y
                \ar[r, "f", swap]
                \ar[rru, "f_\alpha", bend left]
            & X
                \ar[ru, "\pi_\alpha", swap]
        \end{tikzcd}
    \end{equation*}
    %
    Then $f$ is an embedding if and only if $Y$ carries the initial structure induced by the maps $f_\alpha$ and the collection $(f_\alpha)_{\alpha \in A}$ separates points in $Y$.
\end{proposition}

\begin{proof}
    First assume that $f$ is an embedding. In particular it is injective, and since the maps $\pi_\alpha$ separate points in $X$, the compositions $f_\alpha = \pi_\alpha \circ f$ separate points in $Y$. Let $\tilde f \colon Y \to f(Y)$ be the isomorphism such that $f = \iota_{f(Y)} \circ \tilde f$. Then since $\tilde f$ is an isomorphism, in particular $Y$ carries the initial structure induced by $\tilde f$. But then $Y$ carries the initial structure induced by the maps
    %
    \begin{equation}
        \label{eq:embedding_into_product}
        \pi_\alpha \circ \iota_{f(Y)} \circ \tilde f
            = \pi_\alpha \circ f
            = f_\alpha
    \end{equation}
    %
    for $\alpha \in A$, as claimed.

    Conversely, assume that the $f_\alpha$ separate points in $Y$ and that $Y$ has the initial structure $\calF$ induced by the $f_\alpha$. The $f_\alpha$ are then homomorphisms, and by the characteristic property of initial structures so is $f$. Furthermore, if $x,y \in Y$ with $x \neq y$, then there is an $\alpha \in A$ such that $f_\alpha(x) \neq f_\alpha(y)$, which implies that $f(x) \neq f(y)$, so $f$ is injective.

    Denote the product structure on $X$ by $\calE$. We show that if $B \in \calF$, then $f(B) \in \calE_{f(Y)}$, which will imply that $f$ is an embedding. It suffices to prove this when $B$ is an element of a generating set for $\calF$, i.e. on the form $f_\alpha\preim(C)$ for some $\alpha \in A$ and $C \in \calE_\alpha$. By \eqref{eq:embedding_into_product} we have
    %
    \begin{equation*}
        B
            = f_\alpha\preim(C)
            = (\pi_\alpha \circ \iota_{f(Y)} \circ \tilde f)\preim(C)
            = \tilde f\preim \big( (\pi_\alpha \circ \iota_{f(Y)})\preim(C) \big),
    \end{equation*}
    %
    from which it follows that
    %
    \begin{equation*}
        f(B)
            = \tilde f(B)
            = (\pi_\alpha \circ \iota_{f(Y)})\preim(C)
            \in \calE_{f(Y)}.
    \end{equation*}
    %
    as desired.
\end{proof}


If $\calE$ is a structure on a set $X$, we say that $\calE$ is \emph{countably generated} if there is a countable collection of sets $\calD \subseteq 2^X$ such that $\calE = \gen{\calD}$.

\begin{proposition}[Countably generated initial structures]
    Let $(X_\alpha,\calE_\alpha)_{\alpha \in A}$ be a countable collection of structured sets, and assume that the $\calE_\alpha$ are countably generated by collections of sets $\calD_\alpha$. If an initial structure $\calE$ is induced on a set $X$ by maps $f_\alpha \colon X \to X_\alpha$, then $\calE$ is also countably generated.
\end{proposition}

\begin{proof}
    This follows immediately by \cref{rem:initial_structure_generating_set} since the generating set $\bigunion_{\alpha \in A} f_\alpha\preim(\calD_\alpha)$ is a countable union of countable sets.
\end{proof}


\begin{examplebreak}[Second-countable topological spaces]
    \label{ex:second_countable_space}
    A topology is second-countable if and only if it is countably generated, as we show below. The above proposition then implies that an initial topology induced by a countable family of maps into second-countable spaces is itself second-countable. In particular, subspaces and countable products of second-countable spaces are second-countable.
    
    Now to prove the above claim: Since a basis in particular is a generating set (i.e. a subbasis), second-countable topologies are countably generated. Conversely, let $\calT$ be a topology that is generated by a countable set $\calD$. Then a basis $\calB$ for $\calT$ is obtained by taking finite intersections of elements from $\calD$. The number of these intersections is certainly less than the cardinality of the union
    %
    \begin{equation*}
        \bigunion_{n \in \naturals} \bigprod_{i=1}^n \calD
    \end{equation*}
    %
    of all finite products of $\calD$ with itself, an element $U_1 \times \cdots \times U_n$ of an $n$-fold product corresponding to the intersection $\bigintersect_{i=1}^n U_i$. But finite products of countable sets are countable, and so are countable unions of countable sets, so the union above is countable.
\end{examplebreak}


\section{Final structures}

\begin{definition}[Final structures]
    Let $(f_\alpha)_{\alpha \in A}$ be a collection of maps from structured sets $(X_\alpha, \calE_\alpha)$ to a set $X$. The \emph{final structure} $\calE$ on $X$ coinduced by $(f_\alpha)$ is the largest structure on $X$ that makes all $f_\alpha$ homomorphisms. That is,
    %
    \begin{equation*}
        \calE
            = \bigmeet_{\alpha \in A} (f_\alpha)_*(\calE_\alpha).
    \end{equation*}
\end{definition}


\begin{theorem}[Characteristic property of final structures]
    Let $(X,\calE)$ be a structured set equipped with the final structure coinduced by maps $f_\alpha \colon X_\alpha \to X$,  $\alpha \in A$. If $(Y,\calF)$ is a structured set, then $f \colon X \to Y$ is a homomorphism if and only if $f \circ f_\alpha$ is a homomorphism for all $\alpha \in A$:
    %
    \begin{equation*}
        \begin{tikzcd}
            X_\alpha
                \ar[r, "f_\alpha"]
                \ar[dr, "f \circ f_\alpha", swap]
            & X
                \ar[d, "f"] \\
            & Y
        \end{tikzcd}
    \end{equation*}
    %
    Furthermore, the final structure on $X$ is unique with this property.
\end{theorem}

\begin{proof}
    If $f$ is a homomorphism, then clearly the $f \circ f_\alpha$ are all homomorphisms.

    Conversely, assume that the $f \circ f_\alpha$ are homomorphisms. Notice that
    %
    \begin{equation*}
        f_\alpha\preim(f\preim(\calF))
            = (f \circ f_\alpha)\preim(\calF)
            \subseteq \calE_\alpha,
    \end{equation*}
    %
    since the $f \circ f_\alpha$ are homomorphisms. But then $f\preim(\calF) = f^*(\calF)$ is a structure on $X$ with respect to which the $f_\alpha$ are homomorphisms, and thus $f\preim(\calF) \subseteq \calE$ since $\calE$ is the largest structure with this property. Hence $f$ is a homomorphism.

    The proof of uniqueness is analogous to the proof of uniqueness in \cref{thm:initial_characteristic_property}, so we omit it.
\end{proof}


\begin{examplebreak}[Quotient structures]
    Let $X$ be a structured set, and let $Y$ be any set. If $q \colon X \to Y$ is a surjective map, the final structure on $Y$ induced by $q$ is called the \emph{quotient structure}. In particular, if $\sim$ is an equivalence relation on $X$ and $q \colon X \to X/{\sim}$ is the associated natural map, we will always equip $X/{\sim}$ with the quotient structure induced by $q$.
\end{examplebreak}


\begin{examplebreak}[Disjoint unions]
    If $(X_\alpha)_{\alpha \in A}$ is a collection of structured sets, we equip the disjoint union $X = \coprod_{\alpha \in A} X_\alpha$ with the final structure coinduced by the inclusions $i_\alpha \colon X_\alpha \to X$.

    We will see in \cref{sec:structure_categorical} that $X$ is a coproduct of the $X_\alpha$ in $\catStrucS$, but this fact will be convenient in the proof of [final structures as quotient structures].
\end{examplebreak}


\begin{proposition}[Final structures as quotient structures]
    Let $f_\alpha \colon X_\alpha \to Y$ for $\alpha \in A$, let $X = \coprod_{\alpha \in A} X_\alpha$, and let $f \colon X \to Y$ be the unique homomorphism such that $f_\alpha = f \circ i_\alpha$:
    %
    \begin{equation*}
        \begin{tikzcd}
            X_\alpha
                \ar[d, "i_\alpha", swap]
                \ar[dr, "f_\alpha"] \\
            X
                \ar[r, "f", swap]
            & Y
        \end{tikzcd}
    \end{equation*}
    %
    Define an equivalence relation $\sim$ on $X$ by letting $x \sim x'$ if $f(x) = f(x')$ for $x,x' \in X$. Let $q \colon X \to X/{\sim}$ be the associated quotient map, and let $\tilde{f} \colon X/{\sim} \to Y$ be the unique homomorphism such that $\tilde{f} \circ q = f$.

    Assume that $f$ is surjective. Then $Y$ has the final structure coinduced by the $f_\alpha$ if and only if $\tilde{f}$ is an isomorphism.
\end{proposition}
%
The condition that $f$ is surjective is equivalent to the property that every point in $Y$ is in the image of some $f_\alpha$. In this case we say that the maps $f_\alpha$ \emph{cover points} in $Y$.

\begin{proof}
    Consider the commutative diagram:
    %
    \begin{equation*}
        \begin{tikzcd}[column sep=0em]
            X_\alpha
                \ar[d, "i_\alpha", swap]
                \ar[drr, "f_\alpha"] \\
            X
                \ar[rr, "f", swap]
                \ar[dr, "q", swap]
            && Y \\
            & X/{\sim}
                \ar[ur, "\tilde{f}", swap]
        \end{tikzcd}
    \end{equation*}
    %
    First assume that $\tilde{f}$ is an isomorphism. Then $Y$ carries the final structure coinduced by it. But $X/{\sim}$ has the final structure coinduced by $q$, and $X$ the structure coinduced by the $f_\alpha$. By [composition of final structures], $Y$ has the final structure coinduced by the maps
    %
    \begin{equation*}
        \tilde{f} \circ q \circ i_\alpha = f_\alpha,
    \end{equation*}
    %
    as claimed.

    Conversely, assume that $Y$ has the final structure $\calF$ coinduced by the $f_\alpha$. Let $\calE$ denote the disjoint union structure on $X$ and $\tilde{\calE}$ the quotient structure on $X/{\sim}$. Notice that $\tilde{f}$ is surjective since $f$ is surjective, and it is injective by definition of $\sim$. We thus need to prove that $\tilde{f}\inv$ is a homomorphism, and it suffices to show that $\tilde{f}(\tilde{\calE}) \subseteq \calF$. This is the case if and only if
    %
    \begin{equation*}
        q\preim(\tilde{\calE})
            = f\preim(\tilde{f}(\tilde{\calE}))
            \subseteq \calE,
    \end{equation*}
    %
    and this is true since $q$ is a quotient map.
\end{proof}


\section{Categorical properties} \label{sec:structure_categorical}

\subsection{The category $\catStrucS$}

We first recapitulate some of the above results in categorical terms. The main result is the following:

\begin{theorem}[Completeness of $\catStrucS$]
    The category $\catStrucS$ is complete, i.e. it has all small limits.
\end{theorem}

\begin{proof}
    By e.g. \textcite[Theorem~60]{smithcategory} it is enough to show that $\catStrucS$ has all small products and has equalisers.

    \emph{Products}: We claim that the product $(X, \calE)$ considered in \cref{ex:product_structure} is in fact a product of the objects $(X_\alpha, \calE_\alpha)_{\alpha \in A}$ in $\catStrucS$. If $Y$ is a structured set and $f_\alpha \colon Y \to X_\alpha$ are homomorphisms, then since $X$ is a product in $\catSet$ there is a unique set function $f \colon Y \to X$ such that $f_\alpha = \pi_\alpha \circ f$ for all $\alpha \in A$. But $f$ is also a homomorphism by the characteristic property of the product structure, so $(X, \calE)$ is in fact a product in $\catStrucS$.

    \emph{Equalisers}: Let $f,g \colon X \to Y$ be any pair of parallel homomorphisms, and let $E$ be the subset of $X$ on which they agree. If $h \colon Z \to X$ is any homomorphism such that $f \circ h = g \circ h$, then there is a unique homomorphism $u \colon Z \to E$ such that the following diagram commutes:
    %
    \begin{equation*}
        \begin{tikzcd}
            E
                \ar[r, "\iota_E"]
            & X
                \ar[r, shift left, "f"]
                \ar[r, shift right, "g", swap]
            & Y \\
            Z
                \ar[u, dashed, "u"]
                \ar[ur, "h", swap]
        \end{tikzcd}
    \end{equation*}
    %
    We must have $h(Z) \subseteq E$, so we can define $u$ by $u(z) = h(z)$, and $u$ is unique as a set function such that the above diagram commutes. Furthermore, $u$ is a homomorphism by the characteristic property of the subset structure. Thus $E$ along with the inclusion map $\iota_E$ is an equaliser of $f$ and $g$.
\end{proof}


\subsection{Functoriality of $\strucS$}

As mentioned, $\strucS$ is in fact a functor. Its action on a set function $f \colon X \to Y$ is defined as the pullback $f^* \colon \strucS_Y \to \strucS_X$. 

Let $\catSet$ denote the category of sets and $\catCJoinLat$ the category of complete join-semilattices and join-preserving maps.

\begin{proposition}[Functoriality of $\strucS$, I]
    The map $\strucS$ is a contravariant functor from $\catSet$ to $\catCJoinLat$.
\end{proposition}

\begin{proof}
    By \eqref{eq:join_as_generated_structure} and \cref{thm:preimage_and_generation_commute}, for any set function $f$ the pullback $f^*$ preserves joins since preimages respect unions, so it is well-defined as a map $\catSet \to \catCJoinLat$.
    
    The map $\strucS$ is also contravariant since if $f \colon X \to Y$ and $g \colon Y \to Z$ are set functions, then for $\calG \in \strucS_Z$ we have
    %
    \begin{equation*}
        (g \circ f)^*(\calG)
            = (g \circ f)\preim(\calG)
            = f\preim(g\preim(\calG))
            = (f^* \circ g^*) (\calG).
    \end{equation*}
    %
    Its action on identity functions is clearly trivial, so it is a functor.
\end{proof}

In the case of topological spaces or measure spaces we can say slightly more: Notice that in both a lattice of topologies or of $\sigma$-algebras on a set, intersections of topologies ($\sigma$-algebras) are themselves topologies ($\sigma$-algebras). A nonempty subset $\frakL$ of $2^X$, where $X$ is some set, is called an \emph{intersection structure}. If also $X \in \frakL$ we call it a \emph{topped intersection structure}. It is easy to show that topped intersection structures are complete lattices ordered by inclusion, and that meets are given by intersections.

If $\catCLat$ denotes the category of complete lattices with join- and meet-preserving maps, then we have the following:

\begin{proposition}[Functoriality of $\strucS$, II]
    If $\strucS_X$ is an intersection structure for all sets $X$, then $\strucS$ is a contravariant functor from $\catSet$ to $\catCLat$.
\end{proposition}

\begin{proof}
    It suffices to show that $f^*$ preserves meets for all set functions $f \colon X \to Y$. But this is clear since preimages respect intersections.
\end{proof}

It is natural to ask whether the pushforward $f_*$ by $f$ gives rise to a covariant functor from $\catSet$ into a category of lattices. It is easy to see that $f_*$ is monotone, and a short calculation shows that $(g \circ f)_* = g_* \circ f_*$ if $g \colon Y \to Z$ is another set function, so the pushforward does indeed define a covariant functor from $\catSet$ to the category $\catPos$ of posets and monotone maps. But $f_*$ does not, as far as I know, generally preserve meets or joins. If all $\strucS_X$ are intersection structures, however, it does preserve meets, so it is then a functor into the category $\catCMeetLat$ of complete meet-semilattices, though it still does not seem to preserve joins. (I haven't looked too hard for counterexamples.)


\subsection{The forgetful functor on $\catStrucS$}

Just as there is a forgetful functor $\catTop \to \catSet$ that sends a topological space to its underlying set, there is a forgetful functor $U \colon \catStrucS \to \catSet$. As usual, $U$ has a left adjoint $D$ that equips a set with the discrete structure, and it has a right adjoint $T$ that equips the set with the trivial structure, i.e. $D \dashv U \dashv T$.

It follows immediately that $U$ preserves both limits and colimits. Hence if $\catStrucS$ e.g. has coproducts -- which it has, as we will see later -- we already know that they have to be (isomorphic to) disjoint unions of the underlying sets, equipped with an appropriate structure. Contrast this with the situation in the category $\catGrp$ of groups: The forgetful functor $U \colon \catGrp \to \catSet$ has a left adjoint, namely the free functor, so $U$ preserves limits. But it does not preserve colimits; for instance, coproducts in $\catGrp$ are free products, and their underlying sets are certainly not disjoint unions! Hence $U$ does not have a right adjoint.


\subsection{Presheaves on structured sets}

Let $(X, \calE)$ be a structured set, and view $\calE$ as a preorder category. Analogous to the case of topological spaces, a presheaf on $\calE$ (i.e. a contravariant functor $\calE \to \catSet$) is called a \emph{presheaf} on $(X, \calE)$, or simply a presheaf on $X$ if the structure is understood.

As an example, fix a structured set $Y$ and take the presheaf $F$ on $X$ given by $F(B) = \catStrucS(B,Y)$, i.e. $F$ sends a set $B \in \calE$ to the set of homomorphisms $B \to Y$. Furthermore, $F$ sends an inclusion $B \subseteq B'$ in $\calE$ to the restriction map $\catStrucS(B',Y) \to \catStrucS(B,Y)$ given by $f \mapsto f|_B$. A common example of this is the case $\catStrucS = \catTop$ and $Y = \reals$, in which case $F$ sends an open set $U$ to the set of continuous functions $U \to \reals$.



\chapter{Topology}

We remind the reader that a topological space $(X, \calT)$ is \emph{second-countable} if there exists a countable basis for $\calT$. Furthermore, $(X, \calT)$ is said to be \emph{Lindel√∂f} if every open cover of $X$ has a countable subcover.

Recall also that a topological property is called \emph{hereditary} if it follows from a space $X$ having this property that any subspace of $X$ also has this property. It is easy to see that second-countability is hereditary, but the Lindel√∂f property is not:

\begin{remark}
    A space can be Lindel√∂f without being hereditarily Lindel√∂f. Let $(X, \calT)$ be an uncountable discrete space, and let $y \not\in X$. Define a topological space $(Y, \calT')$ with underlying space $ Y = X \union \{y\}$ and topology $\calT' = \calT \union \{Y\}$. Then $(Y, \calT')$ is Lindel√∂f since any open cover must include $Y$ itself, this being the only open set containing the point $y$. But the subspace $X$ (whose subspace topology is exactly $\calT$) is clearly not Lindel√∂f.
\end{remark}
%
If every subspace of $X$ is Lindel√∂f, then we say that $X$ is \emph{hereditarily Lindel√∂f}.

\begin{proposition}
    If $(X,\calT)$ is a second-countable topological space, then it is hereditarily Lindel√∂f.
\end{proposition}

\begin{proof}
    Every subspace of $X$ is second-countable, so it suffices to show that $X$ is Lindel√∂f.
    
    Let $\calU$ be an open cover of $X$ and let $\calB$ be a countable basis for the topology $\calT$. Consider an $x \in X$. Since $\calU$ is a cover of $X$ there is some $U_x \in \calU$ with $x \in \calU$, and since $\calB$ is a basis for $\calT$ there is some $B_x \in \calB$ with $x \in B_x \subseteq U_x$. Let $\calB' \subseteq \calB$ be the subset of open sets obtained in this way. Clearly $\calB'$ is a cover of $X$.
    
    For each $B \in \calB'$, the above shows that there exists some $U \in \calU$ with $B \subseteq U$. This defines a map $\calB' \to \calU$ given by $B \mapsto U$ whose image is a countable cover of $X$, proving the claim.
\end{proof}


\begin{lemma}
    \label{thm:countable_basis}
    Let $(X, \calT)$ be a second-countable space. Then every basis for $\calT$ contains a countable basis for $\calT$.
\end{lemma}

\begin{proof}
    Let $\calB$ be a basis for $\calT$, and let $\calC$ be a countable basis. We can write every $C \in \calC$ on the form $C = \bigunion_{\alpha \in A} B_\alpha$ for some family $(B_\alpha)_{\alpha \in A} \subseteq \calB$. This is in particular an open cover of $C$, so since $X$ is hereditarily Lindel√∂f there is a countable subset $A' \subseteq A$ such that $C = \bigunion_{\alpha \in A'} B_\alpha$. For each $C \in \calC$ we thus obtain a countable subcollection of sets from $\calB$, and since $\calC$ is also countable, the union of all these sets is countable and is clearly a basis for $\calT$.
\end{proof}





\chapter{Measure theory}

If $A$ is a subset of a measurable space $(X, \calE)$, then recall that we denote by $\calE_A$ the initial $\sigma$-algebra on $A$ induced by the inclusion $\iota_A \colon A \to X$. Similarly, if $A$ is a subspace of a topological space $(X, \calT)$, denote by $\calT_A$ the subspace topology on $A$.

\begin{proposition}
    Let $(X, \calT)$ be a topological space, and let $A \subseteq X$. Then $\borel(A) = \borel(X)_A$, i.e. $\sigma(\calT_A) = \sigma(\calT)_A$.
\end{proposition}

\begin{proof}
    Notice that
    %
    \begin{equation*}
        \sigma(\calT_A)
            = \sigma(\iota_A\preim(\calT))
            = \iota_A\preim(\sigma(\calT))
            = \sigma(\calT)_A
    \end{equation*}
    %
    by \cref{thm:preimage_and_generation_commute}.
\end{proof}



\begin{theorem}[Products of Borel $\sigma$-algebras]
    Let $(X_\alpha, \calT_\alpha)_{\alpha \in A}$ be a family of topological spaces, and equip $X = \bigprod_{\alpha \in A} X_\alpha$ with the product topology $\calT$. Then
    %
    \begin{equation*}
        \bigotimes_{\alpha \in A} \borel(X_\alpha)
            \subseteq \borel(X)
    \end{equation*}
    %
    If $A$ is countable and the spaces $X_\alpha$ are second-countable, then the above inclusion is an equality.
\end{theorem}

\begin{proof}
    Since the projections $\pi_\alpha \colon X \to X_\alpha$ are continuous, they are $\borel(X)$-$\borel(X_\alpha)$-measurable. But $\bigotimes_{\alpha \in A} \borel(X_\alpha)$ is the smallest $\sigma$-algebra on $X$ that makes the projections measurable, which proves the above inclusion.
    
    Now assume that $A$ is countable and that all the $X_\alpha$ are second-countable. From \cref{ex:second_countable_space} we know that $X$ is also second-countable. Let
    %
    \begin{equation*}
        \calD = \bigunion_{\alpha \in A} \pi_\alpha\preim(\calT_\alpha)
    \end{equation*}
    %
    be a subbasis for the product topology $\calT$, and let $\calB$ be the collection of finite intersections of elements in $\calD$. Then $\calB$ is a basis for $\calT$, and $\calB$ contains a countable basis $\calC$ for $\calT$ by \cref{thm:countable_basis}. Since $\calC$ is countable, open sets in $X$ are countable unions of finite intersections of elements in $\calD$. Since $A$ is also countable, it suffices to show that
    %
    \begin{equation*}
        \pi_\beta\preim(\calT_\beta)
            \subseteq \bigotimes_{\alpha \in A} \borel(X_\alpha)
    \end{equation*}
    %
    for all $\beta \in A$. But this is obvious since the projections are measurable.
\end{proof}


\nocite{*}

\printbibliography


\end{document}
